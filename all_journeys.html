<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alla GPS-resor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css">
  <style>
    html, body { height: 100%; margin: 0; }
    #map { width: 100vw; height: 70vh; min-height: 320px; }
    #journeyList { margin: 16px 0; }
    .journey-card { background: #f4f8fb; margin-bottom: 10px; padding: 10px 16px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,.07); }
    .journey-toggle { margin-right: 8px; }
    .stats { font-size: 14px; color: #555; margin-top: 4px; }
    @media (prefers-color-scheme: dark) {
      body { background: #0b2030; color: #eaf4fb; }
      .journey-card { background: #1a2a3a; color: #eaf4fb; }
    }
  </style>
</head>
<body>
  <div id="pwWrap" style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;">
    <div style="background:#fff;padding:32px 24px;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,.08);max-width:320px;width:90vw;">
      <h2 style="margin-bottom:18px;text-align:center;">Lösenord krävs</h2>
      <input type="password" id="pwInput" placeholder="Lösenord" style="width:100%;padding:10px 12px;font-size:17px;margin-bottom:14px;border-radius:8px;border:1px solid #ccc;">
      <button id="pwBtn" style="width:100%;padding:10px 0;font-size:17px;background:#2176ae;color:#fff;border:none;border-radius:8px;">Logga in</button>
      <div id="pwMsg" style="margin-top:10px;color:#e55934;font-size:15px;text-align:center;"></div>
    </div>
  </div>
  <div id="mainContent" style="display:none;">
    <header style="padding:12px 0 0 0;text-align:center;">
      <h2 style="margin-bottom:8px;">Alla GPS-resor</h2>
      <div id="totalStats" style="font-size:15px;color:#2176ae;margin-bottom:8px;"></div>
      <div id="colorLegend" style="display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:8px;"></div>
      <button id="toggleAllBtn" class="btn" style="margin-bottom:10px;">Dölj alla</button>
    </header>
    <div id="map"></div>
    <div id="journeyList"></div>
  </div>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script>
    document.getElementById('pwBtn').onclick = function() {
      var pw = document.getElementById('pwInput').value;
      var msg = document.getElementById('pwMsg');
      if (pw === 'kali') {
        document.getElementById('pwWrap').style.display = 'none';
        document.getElementById('mainContent').style.display = '';
  // Add filter input before journeyList after unlocking
        // Now load the JS only after DOM is ready and mainContent is visible
        setTimeout(function() {
          var script = document.createElement('script');
          script.src = 'all_journeys.js';
          document.body.appendChild(script);
        }, 100);
      } else {
        msg.textContent = 'Fel lösenord. Försök igen.';
      }
    };
    document.getElementById('pwInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') document.getElementById('pwBtn').click();
    });
  </script>
</body>
</html>
